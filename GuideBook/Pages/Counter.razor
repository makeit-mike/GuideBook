@page "/counter"

<h1>Counter</h1>

<p>Current count: @currentCount</p>

<button class="btn btn-primary" @onclick="GetRandomUserJSON">Click me</button>
<p>Random User: @randomUser</p>
@code {
    private int currentCount = 0;
    private string randomUser = "N/A";
    private async void IncrementCount()
    {

        currentCount++;
    }
 

    private async void GetRandomUserJSON()
    {
        using (var client = new HttpClient())
        {
            try
            {
                client.BaseAddress = new Uri("https://api.randomuser.me");
                var response = await client.GetAsync("https://api.randomuser.me");
                response.EnsureSuccessStatusCode();

                var stringResult = await response.Content.ReadAsStringAsync();
                //var rawData = JsonConvert.DeserializeObject<PersonAPIResponse>(stringResult);
                //return Ok(new
                //{
                //    Gender = rawData.Results.Select(x => x.Gender)
                //});
                Console.WriteLine(stringResult);
                randomUser = stringResult;
            }

            catch (HttpRequestException httpRequestException)
            {
                randomUser = httpRequestException.Message;
            }
            StateHasChanged();
        }
    }
}
